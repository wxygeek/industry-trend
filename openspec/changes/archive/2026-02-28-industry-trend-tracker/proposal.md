## Why

当前缺乏一套系统化的工具来跟踪A股31个申万一级行业（2021版）的大周期趋势状态。投资者需要快速判断每个行业处于熊市、熊牛转换、牛市、牛熊转换中的哪个阶段，以便做出"买在第二阶段尾声，卖在第四阶段"的决策。手动逐一查看周K线图效率低下，需要一个自动化的行业趋势跟踪分析框架。

## What Changes

- 新增数据采集模块：通过 Playwright 自动化浏览器从申万研究所官网爬取31个一级行业的日K线行情数据
- 新增周K线生成模块：将日K线数据聚合为周K线，并计算34周移动平均线（MA34）
- 新增阶段判断算法：基于价格与MA34的位置关系、穿越行为、偏离度，结合成交量变化，量化判断四个Weinstein阶段
- 新增Web仪表板：交互式展示所有行业的趋势阶段、周K线图表和汇总表格
- 项目使用 Python 语言实现

## Capabilities

### New Capabilities

- `data-scraping`: 通过 Playwright 控制浏览器从申万研究所官网（swsresearch.com）爬取31个申万一级行业指数的历史行情数据（OHLCV），支持增量更新
- `weekly-kline-generation`: 将日K线数据聚合为周K线（周一开盘至周五收盘），计算34周移动平均线及其斜率，输出标准化的周K线+MA数据集
- `stage-analysis-algorithm`: 实现温斯坦（Weinstein）四阶段判断算法——基于价格相对MA34的位置、穿越频率、偏离度及成交量特征，量化输出每个行业当前所处阶段（1/2/3/4）及置信度
- `web-dashboard`: 构建交互式Web仪表板，展示31个行业的阶段汇总表格、周K线+MA34可视化图表，支持行业筛选和阶段过滤

### Modified Capabilities

（无已有能力需要修改）

## Impact

- **新增代码**: Python项目，包含数据采集、数据处理、算法分析、Web展示四个模块
- **外部依赖**: Playwright（浏览器自动化）、pandas（数据处理）、plotly/echarts（可视化）、Flask/Streamlit/Dash（Web框架）
- **外部系统**: 申万研究所官网（数据源，需处理登录态和反爬策略）
- **数据存储**: 本地CSV/SQLite存储历史行情数据
